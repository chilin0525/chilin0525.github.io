<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Dynamo: Amazon&#39;s Highly Available Key-value Storeï¼ˆSOSP 2007ï¼‰ Â· Meow
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Chilin Chiou">
<meta name="description" content="abstract Link to heading æå‡º Amazon é‡åˆ°çš„æœ€å¤§æŒ‘æˆ°æ˜¯ reliability at massive scaleï¼Œéœ€è¦çš„æ˜¯ highly available key-value storageï¼Œç‚º core service æä¾› always-on çš„é«”é©—ã€‚ç‚ºäº†é”åˆ°é€™å€‹ç›®çš„ï¼Œé¸æ“‡çŠ§ç‰²äº†ç‰¹æ®Š failure ä¸‹çš„ consistencyï¼Œä½¿ç”¨ object versioning èˆ‡ pplication-assisted conflict resolution æ©Ÿåˆ¶ã€‚ è¨­è¨ˆä¸Šçš„è€ƒé‡ Link to heading å¦‚ä½•è§£æ±º conflict ç‰¹æ€§ Link to heading éåŒæ­¥è¤‡è£½ çŠ§ç‰² consistent æ› availbility ä¿è­‰ eventually consistent always writable æŠŠè§£æ±ºå¯«å…¥ conflict çš„æƒ…æ³åœ¨è®€å–æ™‚è§£æ±º Syetem Archhitecture Link to heading æå‡ºç”Ÿç”¢ç´šåˆ¥çš„ storage system è¦è€ƒæ…®åº•ä¸‹ä»»å‹™åˆ¶å®šç›¸é—œè§£æ±ºæ–¹æ¡ˆ: load balancing membership and failure detection failure recovery replica synchronization overload handling state transfer concurrency and job scheduling request marshalling request routing system monitoring and alarming configuration management Dynamo è«–æ–‡ä¸­åªè¨è«–äº†ä¸‹é¢çš„å¹¾é …æŠ€è¡“ parition: å¦‚ä½•æ±ºå®šè³‡æ–™è¦å­˜åˆ°å“ªå€‹ç¯€é» replication versioning membership failure detection and failure handling scaling system architecture Link to heading Dynamo å°å¤–æä¾›çš„ interface æœ‰å…©å€‹æ“ä½œ: get(key) æ ¹æ“š key åˆ°æ‰€æœ‰ replica node ä¸Šæœå°‹ï¼Œè¿”å› single objectï¼›ç•¶ç™¼ç”Ÿç‰ˆæœ¬è¡çªçš„æƒ…æ³ï¼Œå‰‡æ˜¯å›å‚³ list of objects witi a context put(key) æ ¹æ“š key æ±ºå®š object è¦å­˜åœ¨å“ªå€‹ replica node context: version of the object opaque to the caller partition Link to heading é‡é»æ˜¯å¦‚ä½•åˆ†é…è³‡æ–™åˆ°ç‰¹å®šç¯€é»ä¸­">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dynamo: Amazon&#39;s Highly Available Key-value Storeï¼ˆSOSP 2007ï¼‰"/>
<meta name="twitter:description" content="abstract Link to heading æå‡º Amazon é‡åˆ°çš„æœ€å¤§æŒ‘æˆ°æ˜¯ reliability at massive scaleï¼Œéœ€è¦çš„æ˜¯ highly available key-value storageï¼Œç‚º core service æä¾› always-on çš„é«”é©—ã€‚ç‚ºäº†é”åˆ°é€™å€‹ç›®çš„ï¼Œé¸æ“‡çŠ§ç‰²äº†ç‰¹æ®Š failure ä¸‹çš„ consistencyï¼Œä½¿ç”¨ object versioning èˆ‡ pplication-assisted conflict resolution æ©Ÿåˆ¶ã€‚ è¨­è¨ˆä¸Šçš„è€ƒé‡ Link to heading å¦‚ä½•è§£æ±º conflict ç‰¹æ€§ Link to heading éåŒæ­¥è¤‡è£½ çŠ§ç‰² consistent æ› availbility ä¿è­‰ eventually consistent always writable æŠŠè§£æ±ºå¯«å…¥ conflict çš„æƒ…æ³åœ¨è®€å–æ™‚è§£æ±º Syetem Archhitecture Link to heading æå‡ºç”Ÿç”¢ç´šåˆ¥çš„ storage system è¦è€ƒæ…®åº•ä¸‹ä»»å‹™åˆ¶å®šç›¸é—œè§£æ±ºæ–¹æ¡ˆ: load balancing membership and failure detection failure recovery replica synchronization overload handling state transfer concurrency and job scheduling request marshalling request routing system monitoring and alarming configuration management Dynamo è«–æ–‡ä¸­åªè¨è«–äº†ä¸‹é¢çš„å¹¾é …æŠ€è¡“ parition: å¦‚ä½•æ±ºå®šè³‡æ–™è¦å­˜åˆ°å“ªå€‹ç¯€é» replication versioning membership failure detection and failure handling scaling system architecture Link to heading Dynamo å°å¤–æä¾›çš„ interface æœ‰å…©å€‹æ“ä½œ: get(key) æ ¹æ“š key åˆ°æ‰€æœ‰ replica node ä¸Šæœå°‹ï¼Œè¿”å› single objectï¼›ç•¶ç™¼ç”Ÿç‰ˆæœ¬è¡çªçš„æƒ…æ³ï¼Œå‰‡æ˜¯å›å‚³ list of objects witi a context put(key) æ ¹æ“š key æ±ºå®š object è¦å­˜åœ¨å“ªå€‹ replica node context: version of the object opaque to the caller partition Link to heading é‡é»æ˜¯å¦‚ä½•åˆ†é…è³‡æ–™åˆ°ç‰¹å®šç¯€é»ä¸­"/>

<meta property="og:title" content="Dynamo: Amazon&#39;s Highly Available Key-value Storeï¼ˆSOSP 2007ï¼‰" />
<meta property="og:description" content="abstract Link to heading æå‡º Amazon é‡åˆ°çš„æœ€å¤§æŒ‘æˆ°æ˜¯ reliability at massive scaleï¼Œéœ€è¦çš„æ˜¯ highly available key-value storageï¼Œç‚º core service æä¾› always-on çš„é«”é©—ã€‚ç‚ºäº†é”åˆ°é€™å€‹ç›®çš„ï¼Œé¸æ“‡çŠ§ç‰²äº†ç‰¹æ®Š failure ä¸‹çš„ consistencyï¼Œä½¿ç”¨ object versioning èˆ‡ pplication-assisted conflict resolution æ©Ÿåˆ¶ã€‚ è¨­è¨ˆä¸Šçš„è€ƒé‡ Link to heading å¦‚ä½•è§£æ±º conflict ç‰¹æ€§ Link to heading éåŒæ­¥è¤‡è£½ çŠ§ç‰² consistent æ› availbility ä¿è­‰ eventually consistent always writable æŠŠè§£æ±ºå¯«å…¥ conflict çš„æƒ…æ³åœ¨è®€å–æ™‚è§£æ±º Syetem Archhitecture Link to heading æå‡ºç”Ÿç”¢ç´šåˆ¥çš„ storage system è¦è€ƒæ…®åº•ä¸‹ä»»å‹™åˆ¶å®šç›¸é—œè§£æ±ºæ–¹æ¡ˆ: load balancing membership and failure detection failure recovery replica synchronization overload handling state transfer concurrency and job scheduling request marshalling request routing system monitoring and alarming configuration management Dynamo è«–æ–‡ä¸­åªè¨è«–äº†ä¸‹é¢çš„å¹¾é …æŠ€è¡“ parition: å¦‚ä½•æ±ºå®šè³‡æ–™è¦å­˜åˆ°å“ªå€‹ç¯€é» replication versioning membership failure detection and failure handling scaling system architecture Link to heading Dynamo å°å¤–æä¾›çš„ interface æœ‰å…©å€‹æ“ä½œ: get(key) æ ¹æ“š key åˆ°æ‰€æœ‰ replica node ä¸Šæœå°‹ï¼Œè¿”å› single objectï¼›ç•¶ç™¼ç”Ÿç‰ˆæœ¬è¡çªçš„æƒ…æ³ï¼Œå‰‡æ˜¯å›å‚³ list of objects witi a context put(key) æ ¹æ“š key æ±ºå®š object è¦å­˜åœ¨å“ªå€‹ replica node context: version of the object opaque to the caller partition Link to heading é‡é»æ˜¯å¦‚ä½•åˆ†é…è³‡æ–™åˆ°ç‰¹å®šç¯€é»ä¸­" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.example.com/posts/distributed-system/dynamo/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-04-24T15:48:44+08:00" />
<meta property="article:modified_time" content="2024-04-24T15:48:44+08:00" />





<link rel="canonical" href="http://www.example.com/posts/distributed-system/dynamo/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.65236a6d834b26194eed04a2a3b45e44d9194ef9e620253705d4bef03bd7ef81.css" integrity="sha256-ZSNqbYNLJhlO7QSio7ReRNkZTvnmICU3BdS&#43;8DvX74E=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.f6534b0b446b75d9b6ad77a97d43ede2ddaeff1b6e2361fb7198d6f8fcb7f83f.css" integrity="sha256-9lNLC0Rrddm2rXepfUPt4t2u/xtuI2H7cZjW&#43;Py3&#43;D8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Meow
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/contact/">Contact me</a>
            </li>
          
        
        
          
          
          
            
          
            
              
                <li class="navigation-item menu-separator">
                  <span>|</span>
                </li>
                
              
              <li class="navigation-item">
                <a href="/pt-br/">ğŸ‡§ğŸ‡·</a>
              </li>
            
          
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://www.example.com/posts/distributed-system/dynamo/">
              Dynamo: Amazon&#39;s Highly Available Key-value Storeï¼ˆSOSP 2007ï¼‰
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-04-24T15:48:44&#43;08:00">
                April 24, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/distributed-system/">distributed system</a>
    </span>
      <span class="separator">â€¢</span>
    <span class="tag">
      <a href="/tags/paper/">paper</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h2 id="abstract">
  abstract
  <a class="heading-link" href="#abstract">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>æå‡º Amazon é‡åˆ°çš„æœ€å¤§æŒ‘æˆ°æ˜¯ reliability at massive scaleï¼Œéœ€è¦çš„æ˜¯ highly available key-value storageï¼Œç‚º core service æä¾› <code>always-on</code> çš„é«”é©—ã€‚ç‚ºäº†é”åˆ°é€™å€‹ç›®çš„ï¼Œé¸æ“‡çŠ§ç‰²äº†ç‰¹æ®Š failure ä¸‹çš„ consistencyï¼Œä½¿ç”¨ object versioning èˆ‡ pplication-assisted conflict resolution æ©Ÿåˆ¶ã€‚</li>
</ul>
<h2 id="è¨­è¨ˆä¸Šçš„è€ƒé‡">
  è¨­è¨ˆä¸Šçš„è€ƒé‡
  <a class="heading-link" href="#%e8%a8%ad%e8%a8%88%e4%b8%8a%e7%9a%84%e8%80%83%e9%87%8f">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>å¦‚ä½•è§£æ±º conflict</li>
</ul>
<h2 id="ç‰¹æ€§">
  ç‰¹æ€§
  <a class="heading-link" href="#%e7%89%b9%e6%80%a7">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>éåŒæ­¥è¤‡è£½</li>
<li>çŠ§ç‰² consistent æ› availbility</li>
<li>ä¿è­‰ eventually consistent</li>
<li>always writable</li>
<li>æŠŠè§£æ±ºå¯«å…¥ conflict çš„æƒ…æ³åœ¨è®€å–æ™‚è§£æ±º</li>
</ul>
<h2 id="syetem-archhitecture">
  Syetem Archhitecture
  <a class="heading-link" href="#syetem-archhitecture">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>æå‡ºç”Ÿç”¢ç´šåˆ¥çš„ storage system è¦è€ƒæ…®åº•ä¸‹ä»»å‹™åˆ¶å®šç›¸é—œè§£æ±ºæ–¹æ¡ˆ:
<ul>
<li>load balancing</li>
<li>membership and failure detection</li>
<li>failure recovery</li>
<li>replica synchronization</li>
<li>overload handling</li>
<li>state transfer</li>
<li>concurrency and job scheduling</li>
<li>request marshalling</li>
<li>request routing</li>
<li>system monitoring and alarming</li>
<li>configuration management</li>
</ul>
</li>
<li>Dynamo è«–æ–‡ä¸­åªè¨è«–äº†ä¸‹é¢çš„å¹¾é …æŠ€è¡“
<ul>
<li>parition: å¦‚ä½•æ±ºå®šè³‡æ–™è¦å­˜åˆ°å“ªå€‹ç¯€é»</li>
<li>replication</li>
<li>versioning</li>
<li>membership</li>
<li>failure detection and failure handling</li>
<li>scaling</li>
</ul>
</li>
</ul>
<h3 id="system-architecture">
  system architecture
  <a class="heading-link" href="#system-architecture">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Dynamo å°å¤–æä¾›çš„ interface æœ‰å…©å€‹æ“ä½œ:
<ul>
<li><code>get(key)</code>
<ul>
<li>æ ¹æ“š key åˆ°æ‰€æœ‰ replica node ä¸Šæœå°‹ï¼Œè¿”å› single objectï¼›ç•¶ç™¼ç”Ÿç‰ˆæœ¬è¡çªçš„æƒ…æ³ï¼Œå‰‡æ˜¯å›å‚³ list of objects witi a <code>context</code></li>
</ul>
</li>
<li><code>put(key)</code>
<ul>
<li>æ ¹æ“š key æ±ºå®š object è¦å­˜åœ¨å“ªå€‹ replica node</li>
</ul>
</li>
<li>context:
<ul>
<li>version of the object</li>
<li>opaque to the caller</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="partition">
  partition
  <a class="heading-link" href="#partition">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>
<p>é‡é»æ˜¯å¦‚ä½•åˆ†é…è³‡æ–™åˆ°ç‰¹å®šç¯€é»ä¸­</p>
</li>
<li>
<p>consistent hashing</p>
<ul>
<li>å·²çŸ¥å„å€‹ç¯€é»ç¶“é hash å¾Œï¼Œåœ¨ ring ä¸­æœ‰å„è‡ªçš„ä½ç½®ï¼Œè€Œè¦è™•ç†çš„ data ç¶“é hash å¾Œæœƒå­˜åœ¨ç’°ä¸ŠæŸä½ç½®ï¼Œä»¥é †æ™‚é˜æ–¹å‘é‡åˆ°ç¬¬ä¸€å€‹ index (æˆ–ç¨± token, è¡¨ç¯€é») å°±è² è²¬è™•ç†é€™ç­†è³‡æ–™
<ul>
<li>é€™å€‹ç¯€é»åœ¨ Dynamo ä¸­ç¨±ç‚º <code>coordinator</code></li>
</ul>
</li>
<li>Skew: ç„¶è€Œå¯¦éš›ä¸Šå¯èƒ½å› ç‚ºåˆ†é…ä¸å‡å‹»ï¼Œå°è‡´ç¯€é»è² è¼‰éé‡æˆ–æ˜¯ä½¿æŸäº› key æ˜ å°„åˆ°åŒä¸€å€‹ç¯€é»çš„æ©Ÿç‡å¢åŠ ï¼Œä¾‹å¦‚ä¸€å€‹ç³»çµ±å…§åªæœ‰å…©å€‹ç¯€é»ï¼Œæ˜ å°„åˆ° ring å¾Œé‚„å¾ˆæ¥è¿‘å½¼æ­¤çš„è©±ï¼Œå…¶ä¸­ä¸€å€‹å°‡æœƒè² æ“”è¿‘ä¹æ•´å€‹ç³»çµ±çš„ loading</li>
<li>virtual node: æœªè§£æ±º loading ä¸å¹³è¡¡çš„æƒ…æ³ï¼ŒDynamo æ¡ç”¨ virtual node å€‹æ¦‚å¿µï¼Œå°‡ä¸€å°ç‰©ç†ç¯€é»åˆ†é…åˆ°ç’°ä¸Šçš„å¤šå€‹ä½ç½® (token)</li>
<li>å„ªç¼ºé»
<ul>
<li>å„ªé»:
<ul>
<li>è² è¼‰å¹³è¡¡ï¼Œé¿å…åœ¨æ–°å¢æˆ–åˆªé™¤ç¯€é»å¾Œï¼Œæœ‰ç¯€é» loading éé‡</li>
<li>åŒæ¨£æ˜¯è² è¼‰å¹³è¡¡ï¼Œå¦‚æœæœ‰ç¡¬é«”è³‡è¨Šè¼ƒå¥½æˆ–è¼ƒå·®ï¼Œå¯ä»¥é€éè™›æ“¬ç¯€é»çš„æ•¸é‡å»èª¿æ•´ç‰©ç†ç¯€é»çš„ loading</li>
</ul>
</li>
<li>ç¼ºé»:
<ul>
<li>æ–°å¢ or æ’å…¥ç¯€é»æ™‚ï¼Œæœƒéœ€è¦é¡å¤–çš„ effort</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/images/Dynamo/replication.png" alt=""></p>
</li>
</ul>
<h2 id="replication">
  replication
  <a class="heading-link" href="#replication">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>ç‚ºé”åˆ°é«˜å¯ç”¨æ€§èˆ‡è³‡æ–™çš„æŒä¹…æ€§ï¼ŒDynamo æœƒå°‡è³‡æ–™è¤‡è£½åˆ° N å€‹ç¯€é»ä¸Š(N ç‚ºè¨­å®šå€¼)</li>
<li>å°æ–¼æ¯å€‹ keyï¼Œæœƒè¢«åˆ†é…åˆ°ä¸€å€‹ç¯€é»ç¨±ç‚º coordinatorï¼Œé™¤äº† coordinator å¤–ï¼Œé‚„æœƒå­˜åœ¨é †æ™‚é–“æ–¹å‘ N-1 å€‹ç¯€é»ä¸Š</li>
<li>åº•ä¸‹ç‚ºç¯„ä¾‹ï¼Œå‡è¨­ N=3ï¼Œè½åœ¨ AB ç¯„åœçš„ key æœƒé †æ™‚é‡æ–¹å‘æ‰¾åˆ°ç¬¬ä¸€å€‹æ¯”å¥¹å¤§çš„ç¯€é»ï¼Œä»¥æ­¤ç¯„ä¾‹å°±æ˜¯ B ç¯€é»ï¼ŒB æœƒè² è²¬å°‡è³‡æ–™è¤‡è£½åˆ° C èˆ‡ D</li>
<li>è² è²¬å„²å­˜ç‰¹å®š key çš„ç¯€é»ç¨±ç‚º perference listï¼Œç„¶è€Œå› ç‚ºç’°ä¸Šå­˜åœ¨è™›æ“¬ç¯€é»ï¼Œå¯¦éš› perference list å…§ç‰©ç†ç¯€é»å¯èƒ½å°‘æ–¼ N å€‹ï¼Œå› æ­¤ perference list åœ¨é¸æ“‡ç¯€é»æ™‚æœƒç‰¹åœ°è·³éä¸€äº›ä½ç½®ï¼Œä¿è­‰è³‡æ–™å­˜åœ¨ä¸åŒçš„ç‰©ç†ç¯€é»ä¸Šé¢</li>
</ul>
<h2 id="conflict">
  conflict
  <a class="heading-link" href="#conflict">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>å¯«å…¥è¡çª:
<ul>
<li>å› ç‚º Dynamo æ¡å– asnyc è¤‡è£½è³‡æ–™çš„æ–¹æ³•ï¼Œå¦‚åŒåˆ†æ•£å¼ç³»çµ±ä¸­å¸¸è¦‹çš„å¯«å…¥æƒ…æ³ï¼Œå¦‚æœ Dynamo <code>put(key)</code> å®Œæˆäº†ä¸€ç­†è³‡æ–™çš„æ–°å¢ï¼Œå¾ˆæœ‰å¯èƒ½å°šæœªè¤‡è£½åˆ°æ‰€æœ‰ replicae node ä¸Šï¼Œæ­¤æ™‚é€å‡º <code>get(key)</code> æ“ä½œå¾ˆæœ‰å¯èƒ½æ‹¿ä¸åˆ°æœ€æ–°æ•¸æ“š</li>
</ul>
</li>
<li>è§£æ±ºè¡çª
<ul>
<li>æ¡ˆä¾‹
<ol>
<li>Client åœ¨ Sx ä¸­å¯«å…¥</li>
<li>Client æƒ³è¦æ›´æ–°å‰›å‰›å¯«å…¥çš„ objectï¼Œå‡è¨­ä»ç„¶æ˜¯ Sx è² è²¬è™•ç†é€™å€‹ requestï¼Œå› æ­¤ vector clock å¾ <code>[Sx, 1]</code> æ›´æ–°åˆ° <code>[Sx, 2]</code>ï¼Œæ³¨æ„ï¼Œæ­¤æ™‚ä¸ä¸€å®šå¯ä»¥åœ¨å…¶ä»– replica node çœ‹åˆ°æ­¤æ¬¡çš„æ›´æ–°</li>
<li></li>
</ol>
</li>
</ul>
</li>
<li>TODO: version vector vs. vector clock</li>
</ul>
<h2 id="membership-and-fault-detection">
  membership and fault detection
  <a class="heading-link" href="#membership-and-fault-detection">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>ç¯€é»å› æ•…éšœæˆ–æ˜¯å®šç¾©ç¶­è­·å°è‡´æš«æ™‚ä¸å¯ç”¨ï¼Œä¸ä»£è¡¨è©²ç¯€é»é›¢é–‹ç³»çµ±ï¼Œå› æ­¤ä¸èƒ½éš¨æ„åš rebalance</li>
<li>ä½¿ç”¨ explicit mechanism å‘ ring å¢åŠ æˆ–åˆªé™¤ç¯€é»ï¼ŒUser å¯ä»¥é€é CLI or Web é€£é€²æŸå€‹ Node ä¸‹æ–°å¢æˆ–åˆªé™¤çš„å‘½ä»¤ï¼Œè² è²¬çš„ç¯€é»æœƒå°‡ç¯€é»è®Šå‹•æ™‚é–“æŒä¹…åŒ–</li>
<li>Gossip-based algorithm to propagate æˆå“¡è®Šå‹•çš„è¨Šæ¯</li>
<li>éç¨‹
<ul>
<li>Init: å…ˆé¸æ“‡ a set of tokens (virtual nodes in the consistent hash space)ï¼Œä¸¦å°‡ç‰©ç†ç¯€é»æ˜ å°„åˆ°é€™äº› tokenã€‚ç‰©ç†ç¯€é»èˆ‡ token set æ˜ å°„çš„é—œä¿‚æœƒæŒä¹…åŒ–åˆ° Diskï¼Œå› æ­¤åœ¨åˆå§‹æ™‚åªæœƒçŸ¥é“è‡ªå·±æ˜ å°„åˆ°å“ªäº› tokenã€‚</li>
<li>åˆ©ç”¨ Gossip protocol æœ€å¾Œæ¯å€‹ç¯€é»éƒ½èƒ½çŸ¥é“å…¶ä»–ç¯€é»å°æ‡‰çš„ token set</li>
</ul>
</li>
<li>ç¼ºé™·: å¯èƒ½åœ¨å¤šå€‹ç¯€é»åŠ å…¥çš„åˆæœŸå½¢æˆ logical partitionï¼Œä¾‹å¦‚ User å…ˆå°‡ç¯€é» A åŠ å…¥ ring å¾Œï¼Œåˆæ–°å¢äº†ç¯€é» Bï¼Œä½†æ­¤æ™‚ A èˆ‡ B éƒ½é‚„ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚è§£æ±ºæ–¹æ³•æ˜¯é€é external mechanism é å…ˆè¨­å®šç¨®å­ç¯€é»ï¼Œåœ¨åˆå§‹åŒ–å¾Œå°±å¯ä»¥å…ˆçŸ¥é“æ¯”æ¬¡å­˜åœ¨ã€‚</li>
<li>ç¯€é»çš„æ–°å¢èˆ‡ç§»é™¤:</li>
</ul>
<h2 id="fault-detection">
  fault detection
  <a class="heading-link" href="#fault-detection">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>
<p>æ¡ç”¨ pure local notion: åªè¦ replica node B æ²’æœ‰å›æ‡‰ replica node A çš„ç¯€é»çš„è©±ï¼Œå° A ç¯€é»è€Œè¨€ B æ­¤æ™‚çš„ç‹€æ…‹å°±æ˜¯æ•…éšœç‹€æ…‹ã€‚é›–ç„¶</p>
</li>
<li>
<p>åº•ä¸‹çš„æ¡ˆä¾‹æ˜¯æ–°å¢äº† X ç¯€é»åˆ° ï¼¡ èˆ‡ B ä¹‹é–“ï¼Œå‡è¨­é€™å€‹ç³»çµ± N=3 çš„è©±ï¼Œæ–°ç¯€é»è¦è² è²¬è™•ç† <code>(F, G)</code>, <code>(G, A]</code> èˆ‡ <code>(A, x]</code> çš„ keyï¼Œå› æ­¤åŸå…ˆçš†åœ¨ A å¾Œé¢çš„ B, C, D ç¯€é»è¦å°‡åŸå…ˆè² è²¬çš„ key è½‰ç§»åˆ° X èº«ä¸Šï¼›åä¹‹ï¼Œå¦‚æœåˆªé™¤ç¯€é»çš„è©±ï¼Œé †åºç›¸åéä¾†ã€‚</p>
<p><img src="/images/Dynamo/replica_membership.png" alt=""></p>
</li>
</ul>
<h2 id="summary">
  summary
  <a class="heading-link" href="#summary">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li>å¾ Dynamo çš„è«–æ–‡ä¸­å¤§è‡´å¯ä»¥ç™¼ç¾å·¥ç¨‹ä¸Šæ”¹å–„äº†ä¸€äº›ç†è«–çš„å•é¡Œé»:
<ul>
<li>parition</li>
<li>vector clock -&gt;</li>
<li>Quorum -&gt; Sloppy Quorum</li>
</ul>
</li>
</ul>
<h2 id="reference">
  reference
  <a class="heading-link" href="#reference">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li><a href="https://arthurchiao.art/blog/amazon-dynamo-zh/"  class="external-link" target="_blank" rel="noopener">[è¯‘] [è®ºæ–‡] Dynamo: Amazon&rsquo;s Highly Available Key-value Storeï¼ˆSOSP 2007</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10217619"  class="external-link" target="_blank" rel="noopener">Day 4 - DynamoDBè¨­è¨ˆè£¡Consistencyèˆ‡Availabilityçš„çˆ­å¥ª - Quorum System(ä¸Š)</a></li>
</ul>

      </div>


      <footer>
        


        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
      2023 -
    
    2024
     Chilin Chiou 
    Â·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  <script data-goatcounter="https://code.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>


  

  

  

  

  

  

  

  

  
</body>

</html>